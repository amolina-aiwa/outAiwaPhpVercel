(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9858:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/adminPanel",function(){return a(8299)}])},1392:function(e,s,a){"use strict";var t=a(5893),c=a(7294),r=a(1163);s.Z=()=>{let[e,s]=(0,c.useState)(null),a=(0,r.useRouter)();return((0,c.useEffect)(()=>{let checkAuth=async()=>{try{let e=await fetch("https://www.aiwaelectronics.com.ar/checkAuth.php",{credentials:"include"}),t=await e.json();console.log("Auth Check Response:",t),t.authenticated?s(!0):(s(!1),a.push("/login"))}catch(e){console.error("Auth Error:",e),s(!1),a.push("/login")}};checkAuth()},[a]),null===e)?(0,t.jsx)("div",{children:"Loading..."}):e}},8299:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return adminPanel}});var t=a(5893),c=a(9008),r=a.n(c),n=a(7294),l=a(5121),o=a(8658),i=a(5005),d=a(1676),u=a(1163),ShowProducts=()=>{let e=(0,u.useRouter)(),[s,a]=(0,n.useState)(!1),[c,r]=(0,n.useState)(""),[h,p]=(0,n.useState)([]),[x,m]=(0,n.useState)([]),[j,N]=(0,n.useState)("audio"),[w,g]=(0,n.useState)("https://www.aiwaelectronics.com.ar/audio.php"),f=(0,n.useCallback)(async()=>{try{let e=await l.Z.get(w);p(e.data)}catch(e){console.error("Error fetching ".concat(j,":"),e)}},[w,j]);(0,n.useEffect)(()=>{g("https://www.aiwaelectronics.com.ar/".concat(j,".php"))},[j]),(0,n.useEffect)(()=>{f()},[w,f]),(0,n.useEffect)(()=>{let e=h.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.sku.toLowerCase().includes(c.toLowerCase()));m(e)},[c,h]);let deleteProduct=async e=>{let s=window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este producto?");if(s)try{await l.Z.delete(w,{data:{id:e}}),f()}catch(e){console.error("Error deleting ".concat(j,":"),e)}},goToEditPage=s=>{e.push("/editProduct/".concat(s,"?category=").concat(j))};return(0,t.jsxs)("div",{className:"mt-4 p-5 bg-primary text-white rounded center",children:[s&&(0,t.jsx)(o.Z,{variant:"danger",dismissible:!0,onClose:()=>a(!1),children:"El producto ya existe. Por favor, elija un nombre de producto \xfanico."}),(0,t.jsxs)("div",{className:"app-container",children:[(0,t.jsxs)("div",{className:"sidebar",children:[(0,t.jsxs)("ul",{className:"sidebar-list",children:[(0,t.jsx)("li",{className:"sidebar-list-item active",children:(0,t.jsx)("a",{href:"#",children:(0,t.jsx)("span",{children:"Productos"})})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.Z,{children:(0,t.jsx)(d.Z.Group,{className:"mb-3",children:(0,t.jsx)(d.Z.Control,{className:"form-title",style:{color:"black"},type:"text",placeholder:"Buscar por Nombre o SKU",value:c,onChange:e=>r(e.target.value)})})})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.Z,{children:(0,t.jsxs)(d.Z.Group,{className:"nice-form-group",children:[(0,t.jsx)(d.Z.Label,{children:"Categor\xeda"}),(0,t.jsxs)(d.Z.Control,{as:"select",onChange:e=>N(e.target.value),children:[(0,t.jsx)("option",{value:"audio",children:"Audio"}),(0,t.jsx)("option",{value:"headsets",children:"Headsets"}),(0,t.jsx)("option",{value:"tablets",children:"Tablets"}),(0,t.jsx)("option",{value:"cooks",children:"Cooks"}),(0,t.jsx)("option",{value:"notebooks",children:"Notebooks"}),(0,t.jsx)("option",{value:"discontinuos",children:"Discontinuos"})]})]})})})]}),(0,t.jsx)("div",{className:"account-info",children:(0,t.jsx)("button",{className:"account-info-more"})})]}),(0,t.jsxs)("div",{className:"app-content",children:[(0,t.jsxs)("div",{className:"app-content-header",children:[(0,t.jsxs)("h1",{className:"app-content-headerText",children:["Productos - ",j.charAt(0).toUpperCase()+j.slice(1)]}),(0,t.jsx)("button",{className:"app-content-headerButton",onClick:()=>{e.push("/newProduct")},children:"A\xf1adir Producto"})]}),(0,t.jsx)("div",{className:"app-content-actions"}),(0,t.jsxs)("div",{className:"products-area-wrapper tableView",children:[(0,t.jsxs)("div",{className:"products-header",children:[(0,t.jsx)("div",{className:"product-cell image",children:"Imagen"}),(0,t.jsx)("div",{className:"product-cell status-cell",children:"Sku"}),(0,t.jsx)("div",{className:"product-cell name",children:"Productos"})]}),x.map(e=>{let s="";try{let a=JSON.parse(e.img_url);Array.isArray(a)&&a.length>0&&(s=a[0])}catch(e){console.error("Error parsing image URL:",e)}return(0,t.jsxs)("div",{className:"products-row",children:[(0,t.jsx)("div",{className:"product-cell image",children:s?(0,t.jsx)("img",{src:s,alt:"Product",style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"5px",backgroundColor:"aqua"}}):(0,t.jsx)("span",{children:"No Image"})}),(0,t.jsxs)("div",{className:"product-cell status-cell",children:[(0,t.jsx)("span",{className:"cell-label",children:"Sku:"}),(0,t.jsx)("span",{className:"status ".concat(e.status?e.status.toLowerCase():""),children:e.sku})]}),(0,t.jsx)("div",{className:"product-cell name",children:e.name}),(0,t.jsxs)("div",{className:"card-footer",children:[(0,t.jsx)(i.Z,{style:{marginRight:"10px"},className:"app-content-headerButton",onClick:()=>goToEditPage(e.id),children:"Editar"}),(0,t.jsx)(i.Z,{className:"app-content-headerButton",onClick:()=>deleteProduct(e.id),children:"Eliminar"})]})]},e.id)})]})]})]})]})},h=a(1392),adminPanel=()=>{let e=(0,h.Z)();return null===e?(0,t.jsx)("div",{children:"Loading..."}):e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r(),{children:(0,t.jsx)("title",{children:"Panel de Administraci\xf3n"})}),(0,t.jsx)(ShowProducts,{})]}):null}}},function(e){e.O(0,[662,121,495,658,774,888,179],function(){return e(e.s=9858)}),_N_E=e.O()}]);