(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[447],{9967:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editProduct/[id]",function(){return a(6683)}])},6683:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return _id_}});var r=a(5893),s=a(7066),t=a(7294),l=a(1676),o=a(5005),c=a(1163),i=a(5079),EditProducts_EditProducts=e=>{let{productId:n,category:a}=e,[d,h]=(0,t.useState)(!1),u=(0,c.useRouter)(),[g,p]=(0,t.useState)(),[m,x]=(0,t.useState)({id:"",sku:"",name:"",longDesc:"",shortDesc:"",img_url:[],colors:[],buyLink:"",driveLink:"",includes:[],features:[],featuredFeatures:[],categories:"",secondCategories:"",thirdCategories:"",line:"",published:!0,banners:[]});(0,t.useEffect)(()=>{let fetchProduct=async()=>{if(n&&a)try{let e=await s.Z.get("http://localhost:8000/".concat(a,"/").concat(n)),r=e.data;console.log("Datos del producto:",r);let t=JSON.parse(r.banners),l=JSON.parse(r.img_url);x({...r,banners:t,img_url:l,published:!0===r.published})}catch(e){console.error("Error fetching product:",e)}};fetchProduct()},[n,a]),(0,t.useEffect)(()=>{p(!m.published)},[m.published]);let handleChange=(e,n)=>{let{name:a,value:r,checked:s,type:t}=e.target,l=[...m.img_url],o="checkbox"===t?s:r;l[n]=o,x({...m,[a]:o,img_url:l})},handleChangeBanner=(e,n,a)=>{let r=[...m.banners];r[n]={...r[n],[a]:e.target.value},x({...m,banners:r})},handleRemoveBanner=e=>{let n=[...m.banners];n.splice(e,1),x({...m,banners:n})},handleSubmit=async e=>{e.preventDefault();try{let e={...m,published:m.published?1:0};await s.Z.put("http://localhost:8000/".concat(a,"/").concat(n),e),console.log("Product updated successfully"),h(!0)}catch(e){console.error("Error updating product:",e)}};return(0,r.jsx)("div",{className:"mt-4 p-5 bg-primary text-white rounded center",children:(0,r.jsx)("div",{className:"app-container",children:(0,r.jsxs)("div",{className:"app-contentEdit",children:[(0,r.jsxs)("div",{className:"app-content-header",children:[(0,r.jsx)("h1",{className:"app-content-headerText",children:"Editar producto"}),(0,r.jsx)("button",{onClick:()=>{u.push("/adminPanel")},variant:"danger",className:"app-content-headerButton",children:"Volver"})]}),(0,r.jsxs)("div",{className:"app-content-actions",children:[g&&(0,r.jsx)("div",{style:{color:"red",marginBottom:"10px"},children:"El producto no est\xe1 publicado. Seleccione 'Publicado' para que sea publicado."}),"F",(0,r.jsxs)(l.Z.Group,{controlId:"published",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Check,{type:"checkbox",name:"published",checked:m.published,onChange:handleChange}),(0,r.jsx)(l.Z.Label,{children:"Publicado"})]}),(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(l.Z.Group,{controlId:"name",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Nombre:"}),(0,r.jsx)(l.Z.Control,{type:"text",name:"name",value:m.name,onChange:handleChange})]}),(0,r.jsxs)(l.Z.Group,{controlId:"longDesc",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Descripci\xf3n Larga:"}),(0,r.jsx)("textarea",{value:m.longDesc,name:"longDesc",onChange:handleChange})]}),(0,r.jsxs)(l.Z.Group,{controlId:"shortDesc",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Descripci\xf3n Corta:"}),(0,r.jsx)("textarea",{value:m.shortDesc,name:"shortDesc",onChange:handleChange})]}),(0,r.jsxs)(l.Z.Group,{controlId:"sku",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"SKU:"}),(0,r.jsx)(l.Z.Control,{type:"text",name:"sku",value:m.sku,onChange:handleChange})]}),(0,r.jsxs)(l.Z.Group,{controlId:"buyLink",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Link de Compra:"}),(0,r.jsx)(l.Z.Control,{type:"text",name:"buyLink",value:m.buyLink,onChange:handleChange})]}),(0,r.jsxs)(l.Z.Group,{controlId:"driveLink",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Link de Descarga:"}),(0,r.jsx)(l.Z.Control,{type:"text",name:"driveLink",value:m.driveLink,onChange:handleChange})]}),(0,r.jsxs)(l.Z.Group,{controlId:"imgUrls",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"URLs de Im\xe1genes:"}),m.img_url.map((e,n)=>(0,r.jsx)("div",{style:{marginBottom:"10px"},className:"banner-entry",children:(0,r.jsx)(l.Z.Control,{type:"text",value:e,onChange:e=>handleChange(e,n),style:{width:"100%",height:"35px"}})},n)),(0,r.jsx)(o.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{let e=[...m.img_url];e.push(""),x({...m,img_url:e})},children:"Agregar URL de imagen"})]}),(0,r.jsxs)(l.Z.Group,{controlId:"banners",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Banners:"}),Array.isArray(m.banners)&&m.banners.map((e,n)=>(0,r.jsxs)("div",{className:"bannerForm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Z.Control,{as:"textarea",style:{width:"15%",height:"auto",minHeight:"35px"},name:"banner_title_".concat(n),placeholder:"T\xedtulo",value:e.title,onChange:e=>handleChangeBanner(e,n,"title")}),(0,r.jsx)(l.Z.Control,{as:"textarea",style:{width:"40%",height:"auto",minHeight:"35px"},name:"banner_img_".concat(n),placeholder:"URL de la imagen",value:e.img,onChange:e=>handleChangeBanner(e,n,"img")}),(0,r.jsx)(l.Z.Control,{as:"textarea",style:{width:"45%",height:"auto",minHeight:"35px"},name:"banner_desc_".concat(n),placeholder:"Descripci\xf3n",value:e.desc,onChange:e=>handleChangeBanner(e,n,"desc")})]}),(0,r.jsx)("div",{children:(0,r.jsx)(o.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>handleRemoveBanner(n),children:"Eliminar"})})]},n)),(0,r.jsx)(o.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{x({...m,banners:[...m.banners,{title:"",img:"",desc:""}]})},children:"Agregar Banner"})]}),(0,r.jsxs)(l.Z.Group,{controlId:"categories",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Categoria:"}),(0,r.jsx)(l.Z.Control,{as:"select",name:"categories",value:(e=>{let n=i.Lm.find(n=>n.id===e);return n?n.name:""})(m.categories),onChange:handleChange,children:i.Lm.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)(l.Z.Group,{controlId:"secondCategories",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Segunda Categoria:"}),(0,r.jsx)(l.Z.Control,{as:"select",name:"secondCategories",value:(e=>{let n=i.gD.find(n=>n.id===e);return n?n.name:""})(m.secondCategories),onChange:handleChange,children:i.gD.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)(l.Z.Group,{controlId:"thirdCategories",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Tercera Categoria:"}),(0,r.jsx)(l.Z.Control,{as:"select",name:"thirdCategories",value:(e=>{let n=i.ll.find(n=>n.id===e);return n?n.name:""})(m.thirdCategories),onChange:handleChange,children:i.ll.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)(l.Z.Group,{controlId:"colors",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Colores:"}),(0,r.jsx)(l.Z.Control,{type:"text",name:"colors",value:m.colors,onChange:handleChange})]}),(0,r.jsxs)(l.Z.Group,{controlId:"line",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Linea:"}),(0,r.jsx)(l.Z.Control,{type:"text",name:"line",value:m.line,onChange:handleChange})]}),(0,r.jsxs)(l.Z.Group,{controlId:"includes",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Incluye:"}),(0,r.jsx)(l.Z.Control,{type:"text",name:"includes",value:m.includes,onChange:handleChange})]}),(0,r.jsxs)(l.Z.Group,{controlId:"features",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Caracter\xedsticas:"}),(0,r.jsx)(l.Z.Control,{type:"text",name:"features",value:m.features,onChange:handleChange})]}),(0,r.jsxs)(l.Z.Group,{controlId:"featuredFeatures",className:"nice-form-group",children:[(0,r.jsx)(l.Z.Label,{children:"Caracter\xedsticas destacadas:"}),(0,r.jsx)(l.Z.Control,{type:"text",name:"featuredFeatures",value:m.featuredFeatures,onChange:handleChange})]}),(0,r.jsx)("button",{onClick:handleSubmit,variant:"danger",className:"app-content-headerButton",style:{marginTop:"20px"},children:"Guardar Cambios"})]}),d&&(0,r.jsx)("div",{className:"alert alert-success",role:"alert",style:{marginTop:"20px",color:"white"},children:"Los cambios fueron guardados con \xe9xito."})]})]})})})},d=a(9008),h=a.n(d),_id_=()=>{let e=(0,c.useRouter)(),{id:n,category:a}=e.query;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h(),{children:(0,r.jsx)("title",{children:"Editar producto"})}),n&&a&&(0,r.jsx)(EditProducts_EditProducts,{productId:n,category:a})," "]})}}},function(e){e.O(0,[66,495,774,888,179],function(){return e(e.s=9967)}),_N_E=e.O()}]);