(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[447],{9967:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editProduct/[id]",function(){return t(6683)}])},6683:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return _id_}});var n=t(5893),r=t(5121),s=t(7294),i=t(1676),l=t(5005),c=t(1163),d=t(5079),EditProducts_EditProducts=e=>{let{productId:a,category:t}=e,[o,u]=(0,s.useState)(!1),h=(0,c.useRouter)(),[p,m]=(0,s.useState)(),[g,x]=(0,s.useState)({id:"",sku:"",name:"",longDesc:"",shortDesc:"",img_url:[],recetario:[],colors:[],buyLink:"",driveLink:"",includes:[],features:[],featuredFeatures:[],categories:"",secondCategories:"",thirdsCategories:"",line:"",published:!0,banners:[]}),[j,f]=(0,s.useState)([]),[C,v]=(0,s.useState)([]),[b,y]=(0,s.useState)([]);(0,s.useEffect)(()=>{let fetchProduct=async()=>{if(a&&t)try{let e=await r.Z.get("https://www.aiwaelectronics.com.ar/".concat(t,".php?id=").concat(a)),n=e.data,s=JSON.parse(n.banners),i=JSON.parse(n.img_url),l=n.recetario?JSON.parse(n.recetario):[],c="string"==typeof n.includes?JSON.parse(n.includes):n.includes,d="string"==typeof n.featuredFeatures?JSON.parse(n.featuredFeatures):n.featuredFeatures,o=d.map(e=>e.id),u="string"==typeof n.features?JSON.parse(n.features):n.features,h=u.map(e=>({id:e.id||"",name:e.name||"",value:e.value||""}));x(e=>({...n,banners:s,img_url:i,recetario:l,includes:c,featuredFeatures:o,features:h,published:1===n.published}))}catch(e){console.error("Error fetching product:",e)}},fetchIncludes=async()=>{try{let e=await r.Z.get("https://www.aiwaelectronics.com.ar/includes.php"),a=e.data.sort((e,a)=>e.id-a.id);f(a)}catch(e){console.error("Error fetching includes:",e)}},fetchFeaturedFeatures=async()=>{try{let e=await r.Z.get("https://www.aiwaelectronics.com.ar/featuredFeatures.php"),a=e.data.sort((e,a)=>e.id-a.id);v(a)}catch(e){console.error("Error fetching featured features:",e)}},fetchFeatures=async()=>{try{let e=await r.Z.get("https://www.aiwaelectronics.com.ar/features.php"),a=e.data.sort((e,a)=>e.id-a.id);y(a)}catch(e){console.error("Error fetching features:",e)}};fetchProduct(),fetchIncludes(),fetchFeaturedFeatures(),fetchFeatures()},[a,t]),(0,s.useEffect)(()=>{m(!g.published)},[g.published]);let handleChange=(e,a)=>{let{name:t,value:n,checked:r,type:s}=e.target,i=[...g.img_url],l="checkbox"===s?r:n;i[a]=l,x({...g,[t]:l,img_url:i})},handleChangeBanner=(e,a,t)=>{let n=[...g.banners];n[a]={...n[a],[t]:e.target.value},x({...g,banners:n})},handleRemoveBanner=e=>{let a=[...g.banners];a.splice(e,1),x({...g,banners:a})},handleIncludeChange=(e,a)=>{let t=[...g.includes];t[a]=Number(e.target.value),x({...g,includes:t})},handleRemoveInclude=e=>{let a=[...g.includes];a.splice(e,1),x({...g,includes:a})},handleFeaturedFeatureChange=(e,a)=>{let t=[...g.featuredFeatures];t[a]=Number(e.target.value),x({...g,featuredFeatures:t})},handleRemoveFeaturedFeature=e=>{let a=[...g.featuredFeatures];a.splice(e,1),x({...g,featuredFeatures:a})},handleFeatureChange=(e,a,t)=>{let n=[...g.features],r={...n[a]};if("id"===t){let a=b.find(a=>a.id===e.target.value);r.id=e.target.value,r.name=a?a.name:""}else r[t]=e.target.value;n[a]=r,x({...g,features:n})},handleRemoveFeature=e=>{let a=[...g.features];a.splice(e,1),x({...g,features:a})},handleSubmit=async e=>{e.preventDefault();try{let e={...g,published:g.published?1:0,featuredFeatures:g.featuredFeatures.map(e=>({id:Number(e)})),features:g.features.map(e=>({id:e.id,name:e.name,value:e.value}))},n=await r.Z.put("https://www.aiwaelectronics.com.ar/".concat(t,".php?id=").concat(a),e);200===n.status?(console.log("Product updated successfully"),u(!0)):console.error("Failed to update product",n)}catch(e){console.error("Error updating product:",e)}};return(0,n.jsx)("div",{className:"mt-4 p-5 bg-primary text-white rounded center",children:(0,n.jsx)("div",{className:"app-container",children:(0,n.jsxs)("div",{className:"app-contentEdit",children:[(0,n.jsxs)("div",{className:"app-content-header",children:[(0,n.jsx)("h1",{className:"app-content-headerText",children:"Editar producto"}),(0,n.jsx)("button",{onClick:()=>{h.push("/adminPanel")},variant:"danger",className:"app-content-headerButton",children:"Volver"})]}),(0,n.jsxs)("div",{className:"app-content-actions",children:[p&&(0,n.jsx)("div",{style:{color:"red",marginBottom:"10px"},children:"El producto no est\xe1 publicado. Seleccione 'Publicado' para que sea publicado."}),(0,n.jsxs)(i.Z.Group,{controlId:"published",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Check,{type:"checkbox",name:"published",checked:g.published,onChange:handleChange}),(0,n.jsx)(i.Z.Label,{children:"Publicado"})]}),(0,n.jsxs)(i.Z,{children:[(0,n.jsxs)(i.Z.Group,{controlId:"name",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"Nombre:"}),(0,n.jsx)(i.Z.Control,{type:"text",name:"name",value:g.name,onChange:handleChange})]}),(0,n.jsxs)(i.Z.Group,{controlId:"longDesc",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"Descripci\xf3n Larga:"}),(0,n.jsx)("textarea",{value:g.longDesc,name:"longDesc",onChange:handleChange})]}),(0,n.jsxs)(i.Z.Group,{controlId:"shortDesc",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"Descripci\xf3n Corta:"}),(0,n.jsx)("textarea",{value:g.shortDesc,name:"shortDesc",onChange:handleChange})]}),(0,n.jsxs)(i.Z.Group,{controlId:"sku",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"SKU:"}),(0,n.jsx)(i.Z.Control,{type:"text",name:"sku",value:g.sku,onChange:handleChange})]}),(0,n.jsxs)(i.Z.Group,{controlId:"buyLink",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"Link de Compra:"}),(0,n.jsx)(i.Z.Control,{type:"text",name:"buyLink",value:g.buyLink,onChange:handleChange})]}),(0,n.jsxs)(i.Z.Group,{controlId:"driveLink",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"Link de Descarga:"}),(0,n.jsx)(i.Z.Control,{type:"text",name:"driveLink",value:g.driveLink,onChange:handleChange})]}),(0,n.jsxs)(i.Z.Group,{controlId:"imgUrls",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"URLs de Im\xe1genes:"}),g.img_url.map((e,a)=>(0,n.jsxs)("div",{style:{marginBottom:"10px"},className:"imageItemEdit",children:[(0,n.jsx)(i.Z.Control,{type:"text",value:e,onChange:e=>handleChange(e,a),style:{width:"100%",height:"35px"}}),e&&(0,n.jsx)("img",{src:e,alt:"Imagen ".concat(a+1),style:{maxWidth:"100%",height:"auto",marginTop:"10px"}})]},a)),(0,n.jsx)(l.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{let e=[...g.img_url];e.push(""),x({...g,img_url:e})},children:"Agregar URL de imagen"})]}),(0,n.jsxs)(i.Z.Group,{controlId:"banners",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"Banners:"}),Array.isArray(g.banners)&&g.banners.map((e,a)=>(0,n.jsxs)("div",{className:"bannerItemEdit",children:[(0,n.jsxs)("div",{className:"bannerItem",children:[(0,n.jsx)(i.Z.Control,{as:"textarea",style:{width:"15%",height:"auto",minHeight:"35px"},name:"banner_title_".concat(a),placeholder:"T\xedtulo",value:e.title,onChange:e=>handleChangeBanner(e,a,"title")}),(0,n.jsx)(i.Z.Control,{type:"text",style:{width:"60%",height:"auto",minHeight:"35px"},name:"banner_img_".concat(a),placeholder:"URL de la Imagen",value:e.img,onChange:e=>handleChangeBanner(e,a,"img")}),(0,n.jsx)(i.Z.Control,{as:"textarea",style:{width:"20%",height:"auto",minHeight:"35px"},name:"banner_desc_".concat(a),placeholder:"Descripci\xf3n",value:e.desc,onChange:e=>handleChangeBanner(e,a,"desc")}),(0,n.jsx)(l.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>handleRemoveBanner(a),style:{marginTop:"10px"},children:"Eliminar Banner"})]}),e.img&&(0,n.jsx)("img",{src:e.img,alt:"Banner ".concat(a+1),style:{maxWidth:"100%",height:"auto",marginTop:"10px"}})]},a)),(0,n.jsx)(l.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{x({...g,banners:[...g.banners,{title:"",img:"",desc:""}]})},children:"Agregar Banner"})]}),(0,n.jsxs)(i.Z.Group,{controlId:"thirdsCategories",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"Tercera Categor\xeda:"}),(0,n.jsxs)(i.Z.Control,{as:"select",name:"thirdsCategories",value:g.thirdsCategories,onChange:handleChange,children:[(0,n.jsx)("option",{value:"",children:"Selecciona una Tercera Categor\xeda"}),d.ll.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)(i.Z.Group,{controlId:"recetario",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"URL del Recetario:"}),g.recetario.map((e,a)=>(0,n.jsx)("div",{style:{marginBottom:"10px"},children:(0,n.jsx)(i.Z.Control,{type:"text",value:e,onChange:e=>{let t=[...g.recetario];t[a]=e.target.value,x({...g,recetario:t})},style:{width:"100%",height:"35px"}})},a)),(0,n.jsx)(l.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{x({...g,recetario:[...g.recetario,""]})},children:"Agregar URL del Recetario"})]}),(0,n.jsxs)(i.Z.Group,{controlId:"line",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"Linea:"}),(0,n.jsx)(i.Z.Control,{type:"text",name:"line",value:g.line,onChange:handleChange})]}),(0,n.jsxs)(i.Z.Group,{controlId:"includes",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"Incluye:"}),Array.isArray(g.includes)&&g.includes.length>0?g.includes.map((e,a)=>(0,n.jsxs)("div",{className:"bannerForm",children:[(0,n.jsxs)("select",{style:{width:"15%",height:"auto",minHeight:"35px"},value:e.id,onChange:e=>handleIncludeChange(e,a,"id"),children:[(0,n.jsx)("option",{value:"",children:"Selecciona un \xedtem"}),j.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.id," - ",e.name]},e.id))]}),(0,n.jsx)(l.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>handleRemoveInclude(a),children:"Eliminar"})]},a)):(0,n.jsx)("p",{children:"No hay \xedtems incluidos."}),(0,n.jsx)(l.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{x({...g,includes:[...g.includes,""]})},children:"Agregar \xcdtem"})]}),(0,n.jsxs)(i.Z.Group,{controlId:"features",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"Caracter\xedsticas:"}),Array.isArray(g.features)&&g.features.map((e,a)=>(0,n.jsxs)("div",{className:"bannerForm",children:[(0,n.jsxs)("select",{style:{width:"15%",height:"auto",minHeight:"35px"},value:e.id,onChange:e=>handleFeatureChange(e,a,"id"),children:[(0,n.jsx)("option",{value:"",children:"Selecciona una caracter\xedstica"}),b.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.id," - ",e.name]},e.id))]}),(0,n.jsx)(i.Z.Control,{style:{width:"15%",height:"auto",minHeight:"35px"},type:"text",value:e.value,onChange:e=>handleFeatureChange(e,a,"value"),placeholder:"Valor"}),(0,n.jsx)(l.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>handleRemoveFeature(a),children:"Eliminar"})]},a)),(0,n.jsx)(l.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>{x({...g,features:[...g.features,{id:"",name:"",value:""}]})},children:"Agregar Caracter\xedstica"})]}),(0,n.jsxs)(i.Z.Group,{controlId:"featuredFeatures",className:"nice-form-group",children:[(0,n.jsx)(i.Z.Label,{children:"Caracter\xedsticas Destacadas:"}),g.featuredFeatures.map((e,a)=>(0,n.jsxs)("div",{className:"bannerForm",children:[(0,n.jsx)("select",{style:{width:"15%",height:"auto",minHeight:"35px"},name:"id",value:e,onChange:e=>handleFeaturedFeatureChange(e,a),children:C.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.id," - ",e.name]},e.id))}),(0,n.jsx)(l.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>handleRemoveFeaturedFeature(a),children:"Eliminar"})]},a)),(0,n.jsx)(l.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>{x({...g,featuredFeatures:[...g.featuredFeatures,""]})},children:"A\xf1adir Caracter\xedstica"})]}),(0,n.jsx)("button",{onClick:handleSubmit,variant:"danger",className:"app-content-headerButton",style:{marginTop:"20px"},children:"Guardar Cambios"})]}),o&&(0,n.jsx)("div",{className:"alert alert-success",role:"alert",style:{marginTop:"20px",color:"white"},children:"Los cambios fueron guardados con \xe9xito."})]})]})})})},o=t(9008),u=t.n(o),_id_=()=>{let e=(0,c.useRouter)(),{id:a,category:t}=e.query;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u(),{children:(0,n.jsx)("title",{children:"Editar producto"})}),a&&t&&(0,n.jsx)(EditProducts_EditProducts,{productId:a,category:t})," "]})}}},function(e){e.O(0,[121,495,774,888,179],function(){return e(e.s=9967)}),_N_E=e.O()}]);