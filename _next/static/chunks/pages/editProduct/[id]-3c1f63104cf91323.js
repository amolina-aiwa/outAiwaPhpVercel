(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[447],{9967:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editProduct/[id]",function(){return r(6683)}])},6683:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return _id_}});var t=r(5893),n=r(5121),s=r(7294),l=r(1676),i=r(5005),o=r(1163),c=r(5079),EditProducts_EditProducts=e=>{let{productId:a,category:r}=e,[d,h]=(0,s.useState)(!1),u=(0,o.useRouter)(),[p,m]=(0,s.useState)(),[g,x]=(0,s.useState)({id:"",sku:"",name:"",longDesc:"",shortDesc:"",img_url:[],recetario:[],colors:[],buyLink:"",driveLink:"",includes:[],features:[],featuredFeatures:[],categories:"",secondCategories:"",thirdsCategories:"",line:"",published:!0,banners:[]}),[j,C]=(0,s.useState)([]),[f,v]=(0,s.useState)([]),[b,y]=(0,s.useState)([]);(0,s.useEffect)(()=>{let fetchProduct=async()=>{if(a&&r)try{let e=await n.Z.get("https://www.aiwaelectronics.com.ar/".concat(r,".php?id=").concat(a)),t=e.data,s=JSON.parse(t.banners),l=JSON.parse(t.img_url),i=t.recetario?JSON.parse(t.recetario):[],o="string"==typeof t.includes?JSON.parse(t.includes):t.includes,c="string"==typeof t.featuredFeatures?JSON.parse(t.featuredFeatures):t.featuredFeatures,d=c.map(e=>e.id),h="string"==typeof t.features?JSON.parse(t.features):t.features,u="string"==typeof t.colors?JSON.parse(t.colors):t.colors,p=h.map(e=>({id:e.id||"",name:e.name||"",value:e.value||""}));x(e=>({...t,banners:s,img_url:l,recetario:i,includes:o,featuredFeatures:d,features:p,published:1===t.published,colors:Array.isArray(u)?u:[]}))}catch(e){console.error("Error fetching product:",e)}},fetchIncludes=async()=>{try{let e=await n.Z.get("https://www.aiwaelectronics.com.ar/includes.php"),a=e.data.sort((e,a)=>e.id-a.id);C(a)}catch(e){console.error("Error fetching includes:",e)}},fetchFeaturedFeatures=async()=>{try{let e=await n.Z.get("https://www.aiwaelectronics.com.ar/featuredFeatures.php"),a=e.data.sort((e,a)=>e.id-a.id);v(a)}catch(e){console.error("Error fetching featured features:",e)}},fetchFeatures=async()=>{try{let e=await n.Z.get("https://www.aiwaelectronics.com.ar/features.php"),a=e.data.sort((e,a)=>e.id-a.id);y(a)}catch(e){console.error("Error fetching features:",e)}};fetchProduct(),fetchIncludes(),fetchFeaturedFeatures(),fetchFeatures()},[a,r]),(0,s.useEffect)(()=>{m(!g.published)},[g.published]);let handleChange=(e,a)=>{let{name:r,value:t,checked:n,type:s}=e.target,l=[...g.img_url],i="checkbox"===s?n:t;l[a]=i,x({...g,[r]:i,img_url:l})},handleChangeBanner=(e,a,r)=>{let t=[...g.banners];t[a]={...t[a],[r]:e.target.value},x({...g,banners:t})},handleRemoveBanner=e=>{let a=[...g.banners];a.splice(e,1),x({...g,banners:a})},handleIncludeChange=(e,a)=>{let r=[...g.includes];r[a]=Number(e.target.value),x({...g,includes:r})},handleRemoveInclude=e=>{let a=[...g.includes];a.splice(e,1),x({...g,includes:a})},handleFeaturedFeatureChange=(e,a)=>{let r=[...g.featuredFeatures];r[a]=Number(e.target.value),x({...g,featuredFeatures:r})},handleRemoveFeaturedFeature=e=>{let a=[...g.featuredFeatures];a.splice(e,1),x({...g,featuredFeatures:a})},handleFeatureChange=(e,a,r)=>{let t=[...g.features],n={...t[a]};if("id"===r){let a=b.find(a=>a.id===e.target.value);n.id=e.target.value,n.name=a?a.name:""}else n[r]=e.target.value;t[a]=n,x({...g,features:t})},handleRemoveFeature=e=>{let a=[...g.features];a.splice(e,1),x({...g,features:a})},handleSubmit=async e=>{e.preventDefault();try{let e={...g,published:g.published?1:0,featuredFeatures:g.featuredFeatures.map(e=>({id:Number(e)})),features:g.features.map(e=>({id:e.id,name:e.name,value:e.value}))},t=await n.Z.put("https://www.aiwaelectronics.com.ar/".concat(r,".php?id=").concat(a),e);200===t.status?(console.log("Product updated successfully"),h(!0)):console.error("Failed to update product",t)}catch(e){console.error("Error updating product:",e)}},handleColorChange=(e,a)=>{let r=[...g.colors];r[a]=e.target.value,x({...g,colors:r})},handleRemoveColor=e=>{let a=[...g.colors];a.splice(e,1),x({...g,colors:a})};return(0,t.jsx)("div",{className:"mt-4 p-5 bg-primary text-white rounded center",children:(0,t.jsx)("div",{className:"app-container",children:(0,t.jsxs)("div",{className:"app-contentEdit",children:[(0,t.jsxs)("div",{className:"app-content-header",children:[(0,t.jsx)("h1",{className:"app-content-headerText",children:"Editar producto"}),(0,t.jsx)("button",{onClick:()=>{u.push("/adminPanel.html")},variant:"danger",className:"app-content-headerButton",children:"Volver"})]}),(0,t.jsxs)("div",{className:"app-content-actions",children:[p&&(0,t.jsx)("div",{style:{color:"red",marginBottom:"10px"},children:"El producto no est\xe1 publicado. Seleccione 'Publicado' para que sea publicado."}),(0,t.jsxs)(l.Z.Group,{controlId:"published",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Check,{type:"checkbox",name:"published",checked:g.published,onChange:handleChange}),(0,t.jsx)(l.Z.Label,{children:"Publicado"})]}),(0,t.jsxs)(l.Z,{children:[(0,t.jsxs)(l.Z.Group,{controlId:"name",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"Nombre:"}),(0,t.jsx)(l.Z.Control,{type:"text",name:"name",value:g.name,onChange:handleChange})]}),(0,t.jsxs)(l.Z.Group,{controlId:"longDesc",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"Descripci\xf3n Larga:"}),(0,t.jsx)("textarea",{value:g.longDesc,name:"longDesc",onChange:handleChange})]}),(0,t.jsxs)(l.Z.Group,{controlId:"shortDesc",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"Descripci\xf3n Corta:"}),(0,t.jsx)("textarea",{value:g.shortDesc,name:"shortDesc",onChange:handleChange})]}),(0,t.jsxs)(l.Z.Group,{controlId:"sku",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"SKU:"}),(0,t.jsx)(l.Z.Control,{type:"text",name:"sku",value:g.sku,onChange:handleChange})]}),(0,t.jsxs)(l.Z.Group,{controlId:"buyLink",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"Link de Compra:"}),(0,t.jsx)(l.Z.Control,{type:"text",name:"buyLink",value:g.buyLink,onChange:handleChange})]}),(0,t.jsxs)(l.Z.Group,{controlId:"driveLink",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"Link de Descarga:"}),(0,t.jsx)(l.Z.Control,{type:"text",name:"driveLink",value:g.driveLink,onChange:handleChange})]}),(0,t.jsxs)(l.Z.Group,{controlId:"imgUrls",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"URLs de Im\xe1genes:"}),g.img_url.map((e,a)=>(0,t.jsxs)("div",{style:{marginBottom:"10px"},className:"imageItemEdit",children:[(0,t.jsx)(l.Z.Control,{type:"text",value:e,onChange:e=>handleChange(e,a),style:{width:"100%",height:"35px"}}),e&&(0,t.jsx)("img",{src:e,alt:"Imagen ".concat(a+1),style:{maxWidth:"100%",height:"auto",marginTop:"10px"}})]},a)),(0,t.jsx)(i.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{let e=[...g.img_url];e.push(""),x({...g,img_url:e})},children:"Agregar URL de imagen"})]}),(0,t.jsxs)(l.Z.Group,{controlId:"banners",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"Banners:"}),Array.isArray(g.banners)&&g.banners.map((e,a)=>(0,t.jsxs)("div",{className:"bannerItemEdit",children:[(0,t.jsxs)("div",{className:"bannerItem",children:[(0,t.jsx)(l.Z.Control,{as:"textarea",style:{width:"15%",height:"auto",minHeight:"35px"},name:"banner_title_".concat(a),placeholder:"T\xedtulo",value:e.title,onChange:e=>handleChangeBanner(e,a,"title")}),(0,t.jsx)(l.Z.Control,{type:"text",style:{width:"60%",height:"auto",minHeight:"35px"},name:"banner_img_".concat(a),placeholder:"URL de la Imagen",value:e.img,onChange:e=>handleChangeBanner(e,a,"img")}),(0,t.jsx)(l.Z.Control,{as:"textarea",style:{width:"20%",height:"auto",minHeight:"35px"},name:"banner_desc_".concat(a),placeholder:"Descripci\xf3n",value:e.desc,onChange:e=>handleChangeBanner(e,a,"desc")}),(0,t.jsx)(i.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>handleRemoveBanner(a),style:{marginTop:"10px"},children:"Eliminar Banner"})]}),e.img&&(0,t.jsx)("img",{src:e.img,alt:"Banner ".concat(a+1),style:{maxWidth:"100%",height:"auto",marginTop:"10px"}})]},a)),(0,t.jsx)(i.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{x({...g,banners:[...g.banners,{title:"",img:"",desc:""}]})},children:"Agregar Banner"})]}),(0,t.jsxs)(l.Z.Group,{controlId:"thirdsCategories",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"Tercera Categor\xeda:"}),(0,t.jsxs)(l.Z.Control,{as:"select",name:"thirdsCategories",value:g.thirdsCategories,onChange:handleChange,children:[(0,t.jsx)("option",{value:"",children:"Selecciona una Tercera Categor\xeda"}),c.ll.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)(l.Z.Group,{controlId:"formColors",children:[(0,t.jsx)(l.Z.Label,{children:"Colors"}),Array.isArray(g.colors)&&g.colors.map((e,a)=>(0,t.jsxs)("div",{className:"d-flex mb-2",children:[(0,t.jsx)(l.Z.Control,{type:"text",value:e,onChange:e=>handleColorChange(e,a),placeholder:"Enter color"}),(0,t.jsx)(i.Z,{variant:"danger",onClick:()=>handleRemoveColor(a),className:"ml-2",children:"Remove"})]},a)),(0,t.jsx)(i.Z,{variant:"primary",onClick:()=>{x({...g,colors:[...g.colors,""]})},children:"Add Color"})]}),(0,t.jsxs)(l.Z.Group,{controlId:"recetario",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"URL del Recetario:"}),g.recetario.map((e,a)=>(0,t.jsx)("div",{style:{marginBottom:"10px"},children:(0,t.jsx)(l.Z.Control,{type:"text",value:e,onChange:e=>{let r=[...g.recetario];r[a]=e.target.value,x({...g,recetario:r})},style:{width:"100%",height:"35px"}})},a)),(0,t.jsx)(i.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{x({...g,recetario:[...g.recetario,""]})},children:"Agregar URL del Recetario"})]}),(0,t.jsxs)(l.Z.Group,{controlId:"line",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"Linea:"}),(0,t.jsx)(l.Z.Control,{type:"text",name:"line",value:g.line,onChange:handleChange})]}),(0,t.jsxs)(l.Z.Group,{controlId:"includes",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"Incluye:"}),Array.isArray(g.includes)&&g.includes.length>0?g.includes.map((e,a)=>(0,t.jsxs)("div",{className:"bannerForm",children:[(0,t.jsxs)("select",{style:{width:"15%",height:"auto",minHeight:"35px"},value:e.id,onChange:e=>handleIncludeChange(e,a,"id"),children:[(0,t.jsx)("option",{value:"",children:"Selecciona un \xedtem"}),j.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.id," - ",e.name]},e.id))]}),(0,t.jsx)(i.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>handleRemoveInclude(a),children:"Eliminar"})]},a)):(0,t.jsx)("p",{children:"No hay \xedtems incluidos."}),(0,t.jsx)(i.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{x({...g,includes:[...g.includes,""]})},children:"Agregar \xcdtem"})]}),(0,t.jsxs)(l.Z.Group,{controlId:"features",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"Caracter\xedsticas:"}),Array.isArray(g.features)&&g.features.map((e,a)=>(0,t.jsxs)("div",{className:"bannerForm",children:[(0,t.jsxs)("select",{style:{width:"15%",height:"auto",minHeight:"35px"},value:e.id,onChange:e=>handleFeatureChange(e,a,"id"),children:[(0,t.jsx)("option",{value:"",children:"Selecciona una caracter\xedstica"}),b.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.id," - ",e.name]},e.id))]}),(0,t.jsx)(l.Z.Control,{style:{width:"15%",height:"auto",minHeight:"35px"},type:"text",value:e.value,onChange:e=>handleFeatureChange(e,a,"value"),placeholder:"Valor"}),(0,t.jsx)(i.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>handleRemoveFeature(a),children:"Eliminar"})]},a)),(0,t.jsx)(i.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>{x({...g,features:[...g.features,{id:"",name:"",value:""}]})},children:"Agregar Caracter\xedstica"})]}),(0,t.jsxs)(l.Z.Group,{controlId:"featuredFeatures",className:"nice-form-group",children:[(0,t.jsx)(l.Z.Label,{children:"Caracter\xedsticas Destacadas:"}),g.featuredFeatures.map((e,a)=>(0,t.jsxs)("div",{className:"bannerForm",children:[(0,t.jsx)("select",{style:{width:"15%",height:"auto",minHeight:"35px"},name:"id",value:e,onChange:e=>handleFeaturedFeatureChange(e,a),children:f.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.id," - ",e.name]},e.id))}),(0,t.jsx)(i.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>handleRemoveFeaturedFeature(a),children:"Eliminar"})]},a)),(0,t.jsx)(i.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>{x({...g,featuredFeatures:[...g.featuredFeatures,""]})},children:"A\xf1adir Caracter\xedstica"})]}),(0,t.jsx)("button",{onClick:handleSubmit,variant:"danger",className:"app-content-headerButton",style:{marginTop:"20px"},children:"Guardar Cambios"})]}),d&&(0,t.jsx)("div",{className:"alert alert-success",role:"alert",style:{marginTop:"20px",color:"white"},children:"Los cambios fueron guardados con \xe9xito."})]})]})})})},d=r(9008),h=r.n(d),_id_=()=>{let e=(0,o.useRouter)(),{id:a,category:r}=e.query;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h(),{children:(0,t.jsx)("title",{children:"Editar producto"})}),a&&r&&(0,t.jsx)(EditProducts_EditProducts,{productId:a,category:r})," "]})}}},function(e){e.O(0,[121,495,774,888,179],function(){return e(e.s=9967)}),_N_E=e.O()}]);