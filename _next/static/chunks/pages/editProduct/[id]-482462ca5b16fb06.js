(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[447],{9967:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editProduct/[id]",function(){return n(6683)}])},6683:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return _id_}});var t=n(5893),r=n(5121),s=n(7294),i=n(1676),l=n(5005),c=n(1163);n(5079);var EditProducts_EditProducts=e=>{let{productId:a,category:n}=e,[d,o]=(0,s.useState)(!1),u=(0,c.useRouter)(),[h,p]=(0,s.useState)(),[m,g]=(0,s.useState)({id:"",sku:"",name:"",longDesc:"",shortDesc:"",img_url:[],colors:[],buyLink:"",driveLink:"",includes:[],features:[],featuredFeatures:[],categories:"",secondCategories:"",thirdCategories:"",line:"",published:!0,banners:[]}),[x,f]=(0,s.useState)([]),[j,v]=(0,s.useState)([]),[C,b]=(0,s.useState)([]);(0,s.useEffect)(()=>{let fetchProduct=async()=>{if(a&&n)try{let e=await r.Z.get("https://www.aiwaelectronics.com.ar/".concat(n,".php?id=").concat(a)),t=e.data,s=JSON.parse(t.banners),i=JSON.parse(t.img_url),l="string"==typeof t.includes?JSON.parse(t.includes):t.includes,c="string"==typeof t.featuredFeatures?JSON.parse(t.featuredFeatures):t.featuredFeatures,d=c.map(e=>e.id),o="string"==typeof t.features?JSON.parse(t.features):t.features,u=o.map(e=>({id:e.id||"",name:e.name||"",value:e.value||""}));g(e=>({...t,banners:s,img_url:i,includes:l,featuredFeatures:d,features:u,published:1===t.published}))}catch(e){console.error("Error fetching product:",e)}},fetchIncludes=async()=>{try{let e=await r.Z.get("https://www.aiwaelectronics.com.ar/includes.php"),a=e.data.sort((e,a)=>e.id-a.id);f(a)}catch(e){console.error("Error fetching includes:",e)}},fetchFeaturedFeatures=async()=>{try{let e=await r.Z.get("https://www.aiwaelectronics.com.ar/featuredFeatures.php"),a=e.data.sort((e,a)=>e.id-a.id);v(a)}catch(e){console.error("Error fetching featured features:",e)}},fetchFeatures=async()=>{try{let e=await r.Z.get("https://www.aiwaelectronics.com.ar/features.php"),a=e.data.sort((e,a)=>e.id-a.id);b(a)}catch(e){console.error("Error fetching features:",e)}};fetchProduct(),fetchIncludes(),fetchFeaturedFeatures(),fetchFeatures()},[a,n]),(0,s.useEffect)(()=>{p(!m.published)},[m.published]);let handleChange=(e,a)=>{let{name:n,value:t,checked:r,type:s}=e.target,i=[...m.img_url],l="checkbox"===s?r:t;i[a]=l,g({...m,[n]:l,img_url:i})},handleChangeBanner=(e,a,n)=>{let t=[...m.banners];t[a]={...t[a],[n]:e.target.value},g({...m,banners:t})},handleRemoveBanner=e=>{let a=[...m.banners];a.splice(e,1),g({...m,banners:a})},handleIncludeChange=(e,a)=>{let n=[...m.includes];n[a]=Number(e.target.value),g({...m,includes:n})},handleRemoveInclude=e=>{let a=[...m.includes];a.splice(e,1),g({...m,includes:a})},handleFeaturedFeatureChange=(e,a)=>{let n=[...m.featuredFeatures];n[a]=Number(e.target.value),g({...m,featuredFeatures:n})},handleRemoveFeaturedFeature=e=>{let a=[...m.featuredFeatures];a.splice(e,1),g({...m,featuredFeatures:a})},handleFeatureChange=(e,a,n)=>{let t=[...m.features],r={...t[a]};if("id"===n){let a=C.find(a=>a.id===e.target.value);r.id=e.target.value,r.name=a?a.name:""}else r[n]=e.target.value;t[a]=r,g({...m,features:t})},handleRemoveFeature=e=>{let a=[...m.features];a.splice(e,1),g({...m,features:a})},handleSubmit=async e=>{e.preventDefault();try{let e={...m,published:m.published?1:0,featuredFeatures:m.featuredFeatures.map(e=>({id:Number(e)})),features:m.features.map(e=>({id:e.id,name:e.name,value:e.value}))};await r.Z.put("https://www.aiwaelectronics.com.ar/".concat(n,".php?id=").concat(a),e),console.log("Product updated successfully"),o(!0)}catch(e){console.error("Error updating product:",e)}};return(0,t.jsx)("div",{className:"mt-4 p-5 bg-primary text-white rounded center",children:(0,t.jsx)("div",{className:"app-container",children:(0,t.jsxs)("div",{className:"app-contentEdit",children:[(0,t.jsxs)("div",{className:"app-content-header",children:[(0,t.jsx)("h1",{className:"app-content-headerText",children:"Editar producto"}),(0,t.jsx)("button",{onClick:()=>{u.push("/adminPanel")},variant:"danger",className:"app-content-headerButton",children:"Volver"})]}),(0,t.jsxs)("div",{className:"app-content-actions",children:[h&&(0,t.jsx)("div",{style:{color:"red",marginBottom:"10px"},children:"El producto no est\xe1 publicado. Seleccione 'Publicado' para que sea publicado."}),(0,t.jsxs)(i.Z.Group,{controlId:"published",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Check,{type:"checkbox",name:"published",checked:m.published,onChange:handleChange}),(0,t.jsx)(i.Z.Label,{children:"Publicado"})]}),(0,t.jsxs)(i.Z,{children:[(0,t.jsxs)(i.Z.Group,{controlId:"name",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Label,{children:"Nombre:"}),(0,t.jsx)(i.Z.Control,{type:"text",name:"name",value:m.name,onChange:handleChange})]}),(0,t.jsxs)(i.Z.Group,{controlId:"longDesc",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Label,{children:"Descripci\xf3n Larga:"}),(0,t.jsx)("textarea",{value:m.longDesc,name:"longDesc",onChange:handleChange})]}),(0,t.jsxs)(i.Z.Group,{controlId:"shortDesc",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Label,{children:"Descripci\xf3n Corta:"}),(0,t.jsx)("textarea",{value:m.shortDesc,name:"shortDesc",onChange:handleChange})]}),(0,t.jsxs)(i.Z.Group,{controlId:"sku",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Label,{children:"SKU:"}),(0,t.jsx)(i.Z.Control,{type:"text",name:"sku",value:m.sku,onChange:handleChange})]}),(0,t.jsxs)(i.Z.Group,{controlId:"buyLink",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Label,{children:"Link de Compra:"}),(0,t.jsx)(i.Z.Control,{type:"text",name:"buyLink",value:m.buyLink,onChange:handleChange})]}),(0,t.jsxs)(i.Z.Group,{controlId:"driveLink",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Label,{children:"Link de Descarga:"}),(0,t.jsx)(i.Z.Control,{type:"text",name:"driveLink",value:m.driveLink,onChange:handleChange})]}),(0,t.jsxs)(i.Z.Group,{controlId:"imgUrls",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Label,{children:"URLs de Im\xe1genes:"}),m.img_url.map((e,a)=>(0,t.jsx)("div",{style:{marginBottom:"10px"},className:"banner-entry",children:(0,t.jsx)(i.Z.Control,{type:"text",value:e,onChange:e=>handleChange(e,a),style:{width:"100%",height:"35px"}})},a)),(0,t.jsx)(l.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{let e=[...m.img_url];e.push(""),g({...m,img_url:e})},children:"Agregar URL de imagen"})]}),(0,t.jsxs)(i.Z.Group,{controlId:"banners",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Label,{children:"Banners:"}),Array.isArray(m.banners)&&m.banners.map((e,a)=>(0,t.jsxs)("div",{className:"bannerForm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Z.Control,{as:"textarea",style:{width:"15%",height:"auto",minHeight:"35px"},name:"banner_title_".concat(a),placeholder:"T\xedtulo",value:e.title,onChange:e=>handleChangeBanner(e,a,"title")}),(0,t.jsx)(i.Z.Control,{as:"textarea",style:{width:"40%",height:"auto",minHeight:"35px"},name:"banner_img_".concat(a),placeholder:"URL de la imagen",value:e.img,onChange:e=>handleChangeBanner(e,a,"img")}),(0,t.jsx)(i.Z.Control,{as:"textarea",style:{width:"45%",height:"auto",minHeight:"35px"},name:"banner_desc_".concat(a),placeholder:"Descripci\xf3n",value:e.desc,onChange:e=>handleChangeBanner(e,a,"desc")})]}),(0,t.jsx)("div",{children:(0,t.jsx)(l.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>handleRemoveBanner(a),children:"Eliminar"})})]},a)),(0,t.jsx)(l.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{g({...m,banners:[...m.banners,{title:"",img:"",desc:""}]})},children:"Agregar Banner"})]}),(0,t.jsxs)(i.Z.Group,{controlId:"line",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Label,{children:"Linea:"}),(0,t.jsx)(i.Z.Control,{type:"text",name:"line",value:m.line,onChange:handleChange})]}),(0,t.jsxs)(i.Z.Group,{controlId:"includes",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Label,{children:"Incluye:"}),Array.isArray(m.includes)&&m.includes.length>0?m.includes.map((e,a)=>(0,t.jsxs)("div",{className:"bannerForm",children:[(0,t.jsxs)("select",{style:{width:"15%",height:"auto",minHeight:"35px"},value:e.id,onChange:e=>handleIncludeChange(e,a,"id"),children:[(0,t.jsx)("option",{value:"",children:"Selecciona un \xedtem"}),x.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.id," - ",e.name]},e.id))]}),(0,t.jsx)(l.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>handleRemoveInclude(a),children:"Eliminar"})]},a)):(0,t.jsx)("p",{children:"No hay \xedtems incluidos."}),(0,t.jsx)(l.Z,{variant:"danger",className:"app-content-headerButton",onClick:()=>{g({...m,includes:[...m.includes,""]})},children:"Agregar \xcdtem"})]}),(0,t.jsxs)(i.Z.Group,{controlId:"features",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Label,{children:"Caracter\xedsticas:"}),Array.isArray(m.features)&&m.features.map((e,a)=>(0,t.jsxs)("div",{className:"bannerForm",children:[(0,t.jsxs)("select",{style:{width:"15%",height:"auto",minHeight:"35px"},value:e.id,onChange:e=>handleFeatureChange(e,a,"id"),children:[(0,t.jsx)("option",{value:"",children:"Selecciona una caracter\xedstica"}),C.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.id," - ",e.name]},e.id))]}),(0,t.jsx)(i.Z.Control,{style:{width:"15%",height:"auto",minHeight:"35px"},type:"text",value:e.value,onChange:e=>handleFeatureChange(e,a,"value"),placeholder:"Valor"}),(0,t.jsx)(l.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>handleRemoveFeature(a),children:"Eliminar"})]},a)),(0,t.jsx)(l.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>{g({...m,features:[...m.features,{id:"",name:"",value:""}]})},children:"Agregar Caracter\xedstica"})]}),(0,t.jsxs)(i.Z.Group,{controlId:"featuredFeatures",className:"nice-form-group",children:[(0,t.jsx)(i.Z.Label,{children:"Caracter\xedsticas Destacadas:"}),m.featuredFeatures.map((e,a)=>(0,t.jsxs)("div",{className:"bannerForm",children:[(0,t.jsx)("select",{style:{width:"15%",height:"auto",minHeight:"35px"},name:"id",value:e,onChange:e=>handleFeaturedFeatureChange(e,a),children:j.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.id," - ",e.name]},e.id))}),(0,t.jsx)(l.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>handleRemoveFeaturedFeature(a),children:"Eliminar"})]},a)),(0,t.jsx)(l.Z,{variant:"danger",style:{width:"15%",height:"auto",minHeight:"35px"},className:"app-content-headerButton",onClick:()=>{g({...m,featuredFeatures:[...m.featuredFeatures,""]})},children:"A\xf1adir Caracter\xedstica"})]}),(0,t.jsx)("button",{onClick:handleSubmit,variant:"danger",className:"app-content-headerButton",style:{marginTop:"20px"},children:"Guardar Cambios"})]}),d&&(0,t.jsx)("div",{className:"alert alert-success",role:"alert",style:{marginTop:"20px",color:"white"},children:"Los cambios fueron guardados con \xe9xito."})]})]})})})},d=n(9008),o=n.n(d),_id_=()=>{let e=(0,c.useRouter)(),{id:a,category:n}=e.query;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o(),{children:(0,t.jsx)("title",{children:"Editar producto"})}),a&&n&&(0,t.jsx)(EditProducts_EditProducts,{productId:a,category:n})," "]})}}},function(e){e.O(0,[121,495,774,888,179],function(){return e(e.s=9967)}),_N_E=e.O()}]);